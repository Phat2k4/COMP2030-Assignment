<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Peer Reviews</title><link rel="stylesheet" href="../css/main.css"></head><body>
<header class="nav"><div class="row container"><a href="../index.html">FUSS</a></div></header>
<main class="container card">
  <div class="grid cols-3">
    <div><label>Tutor (ID)</label><input id="tutor" class="input" placeholder="e.g. 2"></div>
    <div><label>Rating</label><select id="rating" class="input"><option>5</option><option>4</option><option>3</option><option>2</option><option>1</option></select></div>
    <div><label>&nbsp;</label><button class="btn primary" id="add">Submit</button></div>
  </div>
  <div><label>Comment</label><textarea id="comment" class="input" rows="3"></textarea></div>
  <hr><h3>Reviews</h3><div id="list" class="list"></div>
</main>
<script type="module">
  import {api,currentUser,guardAuth} from '../js/app.js'; guardAuth();
  const me=currentUser(); const render=(id)=>{ list.innerHTML=api.reviewsFor(+id).map(r=>`<div class="card"><strong>${r.rating}/5</strong><br>${r.text}<br><small>by ${r.by}</small></div>`).join(''); };
  add.onclick=()=>{ api.addReview({tutor:+tutor.value, rating:+rating.value, text:comment.value.trim(), by:me.name}); comment.value=''; render(tutor.value); };
  tutor.oninput=()=>render(tutor.value);
</script>
</body></html>
