<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Profile</title><link rel="stylesheet" href="../css/main.css"></head><body>
<header class="nav"><div class="row container"><a href="../index.html">FUSS</a></div></header>
<main class="container card">
  <h2>Profile</h2>
  <div class="grid cols-2">
    <div><label>Name</label><input id="name" class="input"></div>
    <div><label>Email</label><input id="email" class="input" disabled></div>
  </div>
  <div class="row" style="margin-top:12px"><button class="btn primary" id="save">Save</button><small id="msg"></small></div>
</main>
<script type="module">
  import {currentUser, store} from '../js/app.js'; // store is internal; expose via window for this page:
  import * as app from '../js/app.js'; window.store = {get:app.store?.get,set:app.store?.set};
  const u=app.currentUser(); if(!u){ location.href='student_login.html'; }
  name.value=u.name; email.value=u.email;
  save.onclick=()=>{ u.name=name.value.trim(); app.store.set('currentUser',u); const users=app.store.get('users',[]); const idx=users.findIndex(x=>x.id===u.id); users[idx]=u; app.store.set('users',users); msg.textContent='Saved.'; };
</script>
</body></html>
